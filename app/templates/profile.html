{% extends "index.html" %}
{% block content %}
<section id="profile"
         class="mb-5 d-flex flex-column justify-content-center align-items-center{{ 'active' if request.path == '/' else '' }}">

    <div class="mt-3 p-2 row d-flex col-12">
        <h2 class="pt-3">{{ profile.username }}</h2>
        <div class="col-12 col-md-6">
            <img class="img-fluid" src="data:image/png;base64, {{ profile_image_data }}" alt="Profile Image">
        </div>
        <div class="col-12 col-md-6">
            <div class="pt-2">
                <p>{{ profile.first_name }} {{ profile.last_name }}</p>
                <p>{{ profile.age }} ans</p>
                <p>{{ profile.gender }}</p>
                <p><strong>Search:</strong> {{ profile.gender_pref }}</p>
                <p><strong>Bio:</strong> {{ profile.bio }}</p>
                <p><strong>Fame Rate:</strong> {{ profile.fame_rate }}</p>
            </div>

            <div class="col-12">
                {% for tag in user_tags %}
                <p class="fw-bold bg-primary border border-primary rounded p-1 px-2 d-inline-block" >{{ tag.name }}</p>
                {% endfor %}
            </div>

            <div class="col-12 mt-2">

                {% if not friendship or sent_invitation %}
                <p id="alert-invitation-sent" class="d-none alert alert-success">Invitation envoy√©e</p>
                {% endif %}

                {% if not friendship %}
                <!--       to send invitation         -->
                <button id="btn-send-invit" class="btn btn-outline-primary col-2 col-md-1" type="button"
                    data-profile-id="{{ profile.id }}" data-user-id="{{ user_id }}">
                    <i class="bi bi-heart"></i>
                </button>

                {% elif received_invitation %}
                <!--       to send connection         -->
                <button class="btn btn-outline-primary col-2 col-md-1" type="button"><i class="bi bi-heart-half"></i>
                </button>

                <!--       to send uninvitation         -->
                {% elif connected %}
                <button class="btn btn-outline-primary col-2 col-md-1" type="button"><i
                        class="bi bi-heartbreak-fill"></i>
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<script type="module" src="/static/js/profile_socket.js"></script>
{% endblock %}
